<form #formVideoAjout="ngForm"  class="video-form">

    <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Thumbnail Vidéo (img)</mat-label>
        <input matInput name="url_img" [(ngModel)]="video.url_img" #url_img="ngModel" required>
        <mat-icon matSuffix (click)="clearUrlImg(); $event.stopPropagation()">close</mat-icon>
        <mat-error *ngIf="url_img.invalid && (url_img.dirty || url_img.touched) && url_img.hasError('required')">
          L'url de thumbnail est obligatoire.
      </mat-error>

      </mat-form-field>




    <mat-form-field class="video-full-width" appearance="fill">
      <mat-label>Nom Vidéo</mat-label>
      <input matInput name="nom" [(ngModel)]="video.nom" #nom="ngModel" required>
      <mat-icon matSuffix (click)="clearNom(); $event.stopPropagation()">close</mat-icon>
      <mat-error *ngIf="nom.invalid && (nom.dirty || nom.touched) && nom.hasError('required')">
        Le nom est obligatoire.
    </mat-error>

  
    </mat-form-field>

    <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Description</mat-label>
        <textarea matInput name="description" [(ngModel)]="video.description" #description="ngModel"></textarea>
        <mat-icon matSuffix (click)="clearDescription(); $event.stopPropagation()">close</mat-icon>

  
      </mat-form-field>

      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Code</mat-label>
        <input matInput name="code" [(ngModel)]="video.code" #code="ngModel" required>
        <mat-icon matSuffix (click)="clearCode(); $event.stopPropagation()">close</mat-icon>
        <mat-error *ngIf="code.invalid && (code.dirty || code.touched) && code.hasError('required')">
          Le code est obligatoire.
      </mat-error>
      </mat-form-field>


      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Auteur</mat-label>
        <mat-select name="auteurVideo" [(ngModel)]="video.auteur.id" #auteur_id="ngModel" required>
          <mat-option *ngFor="let auteur of auteurs" [value]="auteur.id">{{ auteur.pseudo }}</mat-option>
      </mat-select>      
      <mat-error *ngIf="auteur_id.invalid && (auteur_id.dirty || auteur_id.touched) && auteur_id.hasError('required')">
        L'auteur est obligatoire.
    </mat-error>
    </mat-form-field>



    <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Catégorie</mat-label>
        <mat-select name="categorieVideo" [(ngModel)]="video.categorie.id" #categorie_id="ngModel" required>
          <mat-option *ngFor="let categorie of categories" [value]="categorie.id">{{ categorie.nom }}</mat-option>
      </mat-select>
      <mat-error *ngIf="categorie_id.invalid && (categorie_id.dirty || categorie_id.touched) && categorie_id.hasError('required')">
        La catégorie est obligatoire.
    </mat-error>
      </mat-form-field>
      

      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Date de publication</mat-label>
        <input matInput [matDatepicker]="picker" name="date" [(ngModel)]="video.date" #date="ngModel" required>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error *ngIf="date.invalid && (date.dirty || date.touched) && date.hasError('required')">
          La date de publication est obligatoire.
      </mat-error>
  
      </mat-form-field>

      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Durée (secondes)</mat-label>
        <input matInput name="duree" [(ngModel)]="video.duree" #duree="ngModel">
        <mat-icon matSuffix (click)="clearDuree(); $event.stopPropagation()">close</mat-icon>
      </mat-form-field>


      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Nombre de vues</mat-label>
        <input matInput name="vues" [(ngModel)]="video.vues" #vues="ngModel">
        <mat-icon matSuffix (click)="clearVues(); $event.stopPropagation()">close</mat-icon>

      </mat-form-field>


      <mat-form-field class="video-full-width" appearance="fill">
        <mat-label>Score</mat-label>
        <input matInput name="score" [(ngModel)]="video.score" #score="ngModel">
        <mat-icon matSuffix (click)="clearScore(); $event.stopPropagation()">close</mat-icon>
      </mat-form-field>

      <mat-slide-toggle name="closedcaption" [(ngModel)]="video.closedcaption" color="primary">Closed Caption</mat-slide-toggle>
      <mat-slide-toggle name="subtitle" [(ngModel)]="video.subtitle" color="primary">Subtitles</mat-slide-toggle>
      

      
      <div>
          <button *ngIf="video.id; else boutonAjout" mat-button mat-aria-label="Modifier" 
          [disabled]="!formVideoAjout.form.valid" (click)="updateVideo(formVideoAjout)">Modifier</button>

          <ng-template #boutonAjout>
            <button mat-button mat-aria-label="Ajouter" 
                [disabled]="!formVideoAjout.form.valid" (click)="addVideo(formVideoAjout)">
                Créer
            </button>
          </ng-template>


          <button mat-button mat-aria-label="Annuler" (click)="annuler()">Annuler</button>

    </div>


</form>